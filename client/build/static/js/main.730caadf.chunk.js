(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(30),c=a.n(o),r=(a(83),a(37)),i=a(3),u=a(9),l=a(10),h=a(2),m=a(12),d=a(11),j=a(5),b=a.n(j),p=a(1),O=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={email:"",username:"",password:"",user:!1},n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(h.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(h.a)(n)),n.onChangeUsername=n.onChangeUsername.bind(Object(h.a)(n)),n.componentDidMount=n.componentDidMount.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/auth/user").then((function(t){e.setState({user:t.data}),console.log(t.data,t.data.username),t.data.username&&(window.location="/chat")})),console.log(this.state.user)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.email;t.username,t.password;console.log(a,"ttt");var n={email:this.state.email,username:this.state.username,password:this.state.password};console.log(n),b.a.post("/auth/sign-up",n).then((function(e){return console.log(e.data)})),this.setState({username:""})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){return Object(p.jsx)("div",{id:"form-container",children:Object(p.jsxs)("form",{class:"form",onSubmit:this.onSubmit,children:[Object(p.jsxs)("figure",{"aria-hidden":"true",children:[Object(p.jsx)("div",{class:"person-body"}),Object(p.jsx)("div",{class:"neck skin"}),Object(p.jsxs)("div",{class:"head skin",children:[Object(p.jsx)("div",{class:"eyes"}),Object(p.jsx)("div",{class:"mouth"})]}),Object(p.jsx)("div",{class:"hair"}),Object(p.jsx)("div",{class:"ears"}),Object(p.jsx)("div",{class:"shirt-1"}),Object(p.jsx)("div",{class:"shirt-2"})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{class:"label-email",children:[Object(p.jsx)("span",{class:"required",children:"Username"}),Object(p.jsx)("input",{type:"text",required:!0,className:"text",value:this.state.username,onChange:this.onChangeUsername,name:"username",placeholder:"Username",tabindex:"1",autocomplete:"off"})]}),Object(p.jsxs)("label",{class:"label-email",children:[Object(p.jsx)("span",{class:"required",children:"Email"}),Object(p.jsx)("input",{type:"email",required:!0,className:"text",value:this.state.email,onChange:this.onChangeEmail,name:"email",placeholder:"Email",tabindex:"1",autocomplete:"off"})]}),Object(p.jsxs)("label",{class:"label-email",children:[Object(p.jsx)("span",{class:"required",children:"Password"}),Object(p.jsx)("input",{required:!0,className:"text",value:this.state.password,onChange:this.onChangePassword,placeholder:"Password",tabindex:"1",autocomplete:"off"})]})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"submit",value:"Log in",className:"btn btn-primary"})}),Object(p.jsx)("div",{class:"email",children:Object(p.jsx)("a",{href:"./log-in",children:"Already have an account? Log in!"})})]})})}}]),a}(n.Component),f=a(26),v=a.n(f),g=a(77),x=a(38),C=a(76),y=a(41),k=a(71),w=a.n(k),S=a(72),N=a.n(S);a(132);var D=function(e){var t=Object(n.useState)([]),a=Object(y.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),i=Object(y.a)(r,2),u=i[0],l=i[1],h=Object(n.useRef)(),m=s.a.useRef(o);s.a.useEffect((function(){m.current=o})),Object(n.useEffect)((function(){return b.a.post("/chat/messages",{chatroom:e.chatroom}).then((function(e){c(e.data),d()})),l(""),h.current=w.a.connect("/",{query:{username:e.username}}),h.current.on("message",(function(t){var a=t.sender_name,n=t.room_name,s=t.message;n==e.chatroom&&(c([].concat(Object(C.a)(m.current),[{sender:a,room_name:n,message:s}])),d())})),function(){return h.current.disconnect()}}),[e.chatroom]);var d=function(){var e=document.getElementById("chat-container");e.scrollTop=e.scrollHeight},j=function(t){var a=e.username,n=e.chatroom;h.current.emit("message",{sender_name:a,room_name:n,message:u}),t.preventDefault(),l("")};return Object(p.jsxs)("div",{id:"conversation-container",children:[Object(p.jsx)("div",{id:"chat-container",children:o&&function(){if(o)return o.map((function(t,a){var n=t.sender,s=t.message;return Object(p.jsx)("div",{className:n==e.username?"chat sent-chat":"chat received-chat",children:Object(p.jsxs)("p",{className:n==e.username?"message sent-chat-message":"message received-chat-message",children:[n,": ",s]})},a)}))}()}),Object(p.jsxs)("form",{className:"message-form",onSubmit:j,children:[Object(p.jsx)("span",{id:"input-container",children:Object(p.jsx)("input",{name:"message",onChange:function(e){return function(e){l(e.target.value)}(e)},value:u,id:"message-input",label:"Message",autocomplete:"off"})}),Object(p.jsx)(N.a,{id:"sendIcon",onClick:j})]})]})};function M(){return Object(p.jsx)("div",{className:"card",children:"loading..."})}var E=a(74),P=a.n(E),U=(a(138),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChangeRoomName=function(e){n.setState({room_name:e.target.value})},n.state={users:[""],room_name:""},n.componentDidMount=n.componentDidMount.bind(Object(h.a)(n)),n.onChangeRoomName=n.onChangeRoomName.bind(Object(h.a)(n)),n.onChangeUser=n.onChangeUser.bind(Object(h.a)(n)),n.createChatroom=n.createChatroom.bind(Object(h.a)(n)),n.addUser=n.addUser.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById("myModal"),t=document.getElementsByClassName("close")[0];console.log(e,t),t.onclick=function(){e.style.display="none"},window.onclick=function(t){t.target==e&&(e.style.display="none")}}},{key:"onChangeUser",value:function(e,t){var a=this.state.users;a[t]=e.target.value,this.setState({users:a})}},{key:"createChatroom",value:function(e){var t=this;e.preventDefault(),b.a.post("/chat/create-chatroom",{room_name:this.state.room_name,participants:this.state.users}).then((function(e){t.props.onCreateChatroom(e.data)})),this.setState({users:[],room_name:""})}},{key:"addUser",value:function(){var e=this.state.users;e.push(""),this.setState({users:e})}},{key:"toggleCreateChatroomVisibility",value:function(){this.setState({users:[""]}),document.getElementById("myModal").style.display="block"}},{key:"render",value:function(){var e=this,t=this.state.users.map((function(t,a){return Object(p.jsx)("input",{type:"text",required:!0,className:"form-control",value:t,onChange:function(t){return e.onChangeUser(t,a)}})}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{id:"createChatroomToggleButton",onClick:function(){return e.toggleCreateChatroomVisibility()},children:Object(p.jsx)(P.a,{fontSize:"60px",id:"plusIcon"})}),Object(p.jsx)("div",{id:"myModal",className:"modal",children:Object(p.jsxs)("div",{class:"modal-content",children:[Object(p.jsx)("span",{className:"close",children:"\xd7"}),Object(p.jsxs)("form",{id:"createChatroomForm",onSubmit:function(t){return e.createChatroom(t)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Chatroom name "}),Object(p.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.room_name,onChange:this.onChangeRoomName}),Object(p.jsx)("label",{children:"Participants: "}),t,Object(p.jsx)("button",{onClick:function(){return e.addUser()},children:"Add particiant"})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"submit",value:"Create Chatroom",className:"btn btn-primary"})})]})]})})]})}}]),a}(n.Component)),q=(a(139),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={chatrooms:[]},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.chatrooms).map((function(t,a){return Object(p.jsx)("div",{className:"chatroomDiv",onClick:function(){return e.props.openChatroom(t)},children:Object(p.jsx)("h2",{className:"chatroomDivName",children:t})},a)}));return Object(p.jsx)("div",{id:"chatroomDivsContainer",children:t})}}]),a}(n.Component)),_=(a(140),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={user:!1,chatrooms:[],openedChatroom:"",loadingChat:!0,createChatroomVisible:!1},n.componentDidMount=n.componentDidMount.bind(Object(h.a)(n)),n.openChatroom=n.openChatroom.bind(Object(h.a)(n)),n.onCreateChatroom=n.onCreateChatroom.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/auth/user").then((function(t){e.setState({user:t.data.username}),t.data.username||(window.location="/log-in")})),b.a.get("/chat/chatrooms").then((function(t){e.setState({chatrooms:t.data,openedChatroom:Object.keys(t.data)[0],loadingChat:!1})}))}},{key:"openChatroom",value:function(e){this.setState({openedChatroom:e})}},{key:"onCreateChatroom",value:function(e){var t=this.state.chatrooms;this.setState({chatrooms:t.concat([e])}),this.toggleCreateChatroomVisibility()}},{key:"updateChat",value:function(){var e=Object(x.a)(v.a.mark((function e(t){var a,n,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.chatrooms[this.state.openedChatroom].concat([t]),n=this.state.openedChatroom,(s=Object(g.a)({},this.state.chatrooms))[n]=a,e.next=6,this.setState({chatrooms:s});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(p.jsxs)(p.Fragment,{children:[this.state.loadingChat&&Object(p.jsx)(M,{}),!this.state.loadingChat&&Object(p.jsxs)("div",{id:"main-container",children:[Object(p.jsxs)("div",{id:"side-container",children:[Object(p.jsx)(U,{onCreateChatroom:function(){return e.onCreateChatroom}}),Object(p.jsx)(q,{chatrooms:this.state.chatrooms,openChatroom:function(t){return e.openChatroom(t)}})]}),Object(p.jsx)(D,{chatroom:this.state.openedChatroom,username:this.state.user,messages:this.state.chatrooms[this.state.openedChatroom],updateChat:function(){var t=Object(x.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateChat(a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})]})]})}}]),a}(n.Component)),B=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={user:!1},n.componentDidMount=n.componentDidMount.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/auth/user").then((function(t){e.setState({user:t.data}),console.log(t.data,t.data.username),t.data.username&&(window.location="/chat")})),console.log(this.state.user)}},{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"WC"}),Object(p.jsx)("a",{href:"/log-in",children:Object(p.jsx)("button",{children:"Log in"})}),Object(p.jsx)("a",{href:"/sign-up",children:Object(p.jsx)("button",{children:"Sign up"})})]})}}]),a}(n.Component),F=(a(141),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",user:!1},n.onChangeEmail=n.onChangeEmail.bind(Object(h.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n.componentDidMount=n.componentDidMount.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/auth/user").then((function(t){e.setState({user:t.data}),console.log(t.data,t.data.username),t.data.username&&(window.location="/chat")})),console.log(this.state.user)}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),b.a.post("/auth/log-in",{email:this.state.email,password:this.state.password}).then((function(e){console.log(e.data),200==e.status&&(window.location="/chat")})),this.setState({username:""})}},{key:"render",value:function(){return Object(p.jsx)("div",{id:"form-container",children:Object(p.jsxs)("form",{class:"form",onSubmit:this.onSubmit,children:[Object(p.jsx)("img",{src:"../assets/logo2.png"}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{class:"label-email",children:[Object(p.jsx)("span",{class:"required",children:"Email"}),Object(p.jsx)("input",{required:!0,className:"text",value:this.state.email,onChange:this.onChangeEmail,name:"email",placeholder:"Email",tabindex:"1",autocomplete:"off"})]}),Object(p.jsxs)("label",{class:"label-email",children:[Object(p.jsx)("span",{class:"required",children:"Password"}),Object(p.jsx)("input",{required:!0,className:"text",value:this.state.password,onChange:this.onChangePassword,placeholder:"Password",tabindex:"1",autocomplete:"off"})]})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("input",{type:"submit",value:"Log in",className:"btn btn-primary"})}),Object(p.jsx)("div",{class:"email",children:Object(p.jsx)("a",{href:"./sign-up",children:"Don't have an account? Sign up!"})})]})})}}]),a}(n.Component));var I=function(){return Object(p.jsx)(r.a,{children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(i.a,{path:"/",exact:!0,component:B}),Object(p.jsx)(i.a,{path:"/log-in",component:F}),Object(p.jsx)(i.a,{path:"/sign-up",component:O}),Object(p.jsx)(i.a,{path:"/chat",component:_})]})})},L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,160)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),o(e),c(e)}))};c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(I,{})}),document.getElementById("root")),L()},83:function(e,t,a){}},[[147,1,2]]]);
//# sourceMappingURL=main.730caadf.chunk.js.map